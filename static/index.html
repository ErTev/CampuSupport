<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CampuSupport - Ticket Sistemi</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <h1>ğŸ“ CampuSupport - Destek Sistemi</h1>
        <div id="message" class="message hidden"></div>

        <section id="auth-section">
            <h2>GiriÅŸ Yap</h2>
            <form id="login-form">
                <label for="login-email">E-posta:</label>
                <input type="email" id="login-email" placeholder="Ã¶rnek@universite.edu.tr" required>
                
                <label for="login-password">Åifre:</label>
                <input type="password" id="login-password" placeholder="En az 6 karakter" required>
                
                <button type="submit">GiriÅŸ Yap</button>
            </form>
            
            <p style="text-align: center;">
                HesabÄ±nÄ±z yok mu? <a href="#" id="show-register">KayÄ±t Ol</a>
            </p>

            <h2 id="register-title" style="display:none;">Yeni Hesap OluÅŸtur</h2>
            <form id="register-form" style="display:none;">
                <label for="register-email">E-posta:</label>
                <input type="email" id="register-email" placeholder="Ã¶rnek@universite.edu.tr" required>
                
                <label for="register-password">Åifre:</label>
                <input type="password" id="register-password" placeholder="En az 6 karakter" required>
                
                <label for="register-role">RolÃ¼ SeÃ§in:</label>
                <select id="register-role" required>
                    <option value="">-- Rol SeÃ§in --</option>
                    <option value="student">Ã–ÄŸrenci</option>
                    <option value="support">Destek Personeli</option>
                    <option value="department">Departman YÃ¶neticisi</option>
                    <option value="admin">YÃ¶netici</option>
                </select>
                
                <button type="submit">KayÄ±t Ol</button>
            </form>
        </section>

        <section id="ticket-section" style="display:none;">
            <div id="user-info" style="display:none;">
                <div>
                    <strong>HoÅŸ geldiniz,</strong> <span id="current-user">KullanÄ±cÄ±</span>
                    <span id="current-user-role" style="margin-left: 10px; font-size: 12px; color: #667eea; font-weight: bold;"></span>
                </div>
                <button id="logout-button">Ã‡Ä±kÄ±ÅŸ Yap</button>
            </div>

            <!-- STUDENT SECTION -->
            <div id="student-section" style="display:none;">
                <h2>Yeni Ticket OluÅŸtur</h2>
                <form id="ticket-form">
                    <label for="ticket-title">BaÅŸlÄ±k:</label>
                    <input type="text" id="ticket-title" placeholder="Ã–rn: Åifre sÄ±fÄ±rlama isteÄŸi" required>
                    
                    <label for="ticket-description">AÃ§Ä±klama:</label>
                    <textarea id="ticket-description" placeholder="Sorununuzun detaylÄ± aÃ§Ä±klamasÄ±nÄ± yapÄ±nÄ±z..." required></textarea>
                    <button type="button" id="suggest-btn" style="margin-top:8px;">Ã–neri Al</button>
                    <div id="suggestions" style="margin-top:8px; display:none;">
                        <strong>Ã–nerilen Departman:</strong> <span id="suggested-department"></span>
                        <br>
                        <strong>Ã–nerilen Ã–ncelik:</strong> <span id="suggested-priority"></span>
                        <br>
                        <button type="button" id="accept-suggestion" style="margin-top:6px;">Ã–neriyi Kabul Et</button>
                    </div>
                    
                    <label for="ticket-department">Departman:</label>
                    <select id="ticket-department" required>
                        <option value="">-- Departman SeÃ§in --</option>
                        <option value="Bilgi Islem">Bilgi Ä°ÅŸlem</option>
                        <option value="Yapi Isleri">YapÄ± Ä°ÅŸleri</option>
                        <option value="Ogrenci Isleri">Ã–ÄŸrenci Ä°ÅŸleri</option>
                        <option value="Akademik Danismanlik">Akademik DanÄ±ÅŸmanlÄ±k</option>
                    </select>
                    
                    <label for="ticket-priority">Ã–ncelik:</label>
                    <select id="ticket-priority" required>
                        <option value="">-- Ã–ncelik SeÃ§in --</option>
                        <option value="Low">DÃ¼ÅŸÃ¼k</option>
                        <option value="Medium">Orta</option>
                        <option value="High">YÃ¼ksek</option>
                    </select>
                    
                    <button type="submit">Ticket GÃ¶nder</button>
                </form>
            </div>

            <!-- DEPARTMENT SECTION -->
            <div id="department-section" style="display:none;">
                <h2>ğŸ“‹ Departman YÃ¶netimi Paneli</h2>
                
                <div style="margin-bottom: 20px;">
                    <label for="dept-status-filter">Duruma GÃ¶re Filtrele:</label>
                    <select id="dept-status-filter">
                        <option value="">-- TÃ¼m Durumlar --</option>
                        <option value="Open">AÃ§Ä±k</option>
                        <option value="In Progress">Ä°ÅŸlemde</option>
                        <option value="Resolved">Ã‡Ã¶zÃ¼ldÃ¼</option>
                        <option value="Closed">KapalÄ±</option>
                    </select>
                </div>

                <h3>Departman Ticket'larÄ±</h3>
                <div id="department-tickets-container"></div>
            </div>

            <!-- SUPPORT SECTION -->
            <div id="support-section" style="display:none;">
                <h2>ğŸ› ï¸ Destek Personeli Paneli</h2>
                <h3>Bana AtanmÄ±ÅŸ Ticket'lar</h3>
                <div id="support-tickets-container"></div>
            </div>

            <!-- ADMIN SECTION -->
            <div id="admin-section" style="display:none;">
                <h2>âš™ï¸ YÃ¶netici Paneli</h2>
                
                <div style="margin-bottom: 20px;">
                    <label for="admin-dept-filter">Departman Filtresi:</label>
                    <select id="admin-dept-filter">
                        <option value="">-- TÃ¼m Departmanlar --</option>
                        <option value="Bilgi Islem">Bilgi Ä°ÅŸlem</option>
                        <option value="Yapi Isleri">YapÄ± Ä°ÅŸleri</option>
                        <option value="Ogrenci Isleri">Ã–ÄŸrenci Ä°ÅŸleri</option>
                        <option value="Akademik Danismanlik">Akademik DanÄ±ÅŸmanlÄ±k</option>
                    </select>
                    
                    <label for="admin-status-filter" style="margin-left: 20px;">Duruma GÃ¶re Filtrele:</label>
                    <select id="admin-status-filter">
                        <option value="">-- TÃ¼m Durumlar --</option>
                        <option value="Open">AÃ§Ä±k</option>
                        <option value="In Progress">Ä°ÅŸlemde</option>
                        <option value="Resolved">Ã‡Ã¶zÃ¼ldÃ¼</option>
                        <option value="Closed">KapalÄ±</option>
                    </select>
                    <button id="admin-filter-btn" style="margin-left: 10px; padding: 10px 20px; background-color: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer;">Filtrele</button>
                </div>

                <h3>TÃ¼m Ticket'lar</h3>
                <div id="admin-tickets-container"></div>

                        <!-- MODAL - Departman Atama -->
                        <div id="assign-modal" style="display:none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
                            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 400px; box-shadow: 0 10px 40px rgba(0,0,0,0.2);">
                                <h3>Ticket'Ä± Departmana Ata</h3>
                                <form id="assign-form">
                                    <label for="assign-department">Departman SeÃ§in:</label>
                                    <select id="assign-department" required>
                                        <option value="">-- Departman SeÃ§in --</option>
                                        <option value="Bilgi Islem">Bilgi Ä°ÅŸlem</option>
                                        <option value="Yapi Isleri">YapÄ± Ä°ÅŸleri</option>
                                        <option value="Ogrenci Isleri">Ã–ÄŸrenci Ä°ÅŸleri</option>
                                        <option value="Akademik Danismanlik">Akademik DanÄ±ÅŸmanlÄ±k</option>
                                    </select>
                                    <button type="submit" style="margin-top: 10px; width: 100%; background-color: #28a745; color: white; padding: 10px; border: none; border-radius: 5px; cursor: pointer;">Ata</button>
                                    <button type="button" id="close-modal" style="margin-top: 10px; width: 100%; background-color: #dc3545; color: white; padding: 10px; border: none; border-radius: 5px; cursor: pointer;">Ä°ptal</button>
                                </form>
                            </div>
                        </div>
            </div>

            <!-- COMMON TICKETS LIST -->
            <div id="ticket-list">
                <h3>ğŸ“‹ Ticket Listem</h3>
                <div id="tickets-container"></div>
            </div>
        </section>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>